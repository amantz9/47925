<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Survey Results</title>
<script type="text/javascript">

function getCookies() {
    var cookies = {}; // The object we will return
    var all = document.cookie; // Get all cookies in one big string
    if (all === "") // If the property is the empty string
        return cookies; // return an empty object
    var list = all.split("; "); // Split into individual name=value pairs
    for(var i = 0; i < list.length; i++) { // For each cookie
        var cookie = list[i];
        var p = cookie.indexOf("="); // Find the first = sign
        var name = cookie.substring(0,p); // Get cookie name
        var value = cookie.substring(p+1); // Get cookie value
        value = decodeURIComponent(value); // Decode the value
        cookies[name] = value; // Store name and value in object
    }
    return cookies;
}

</script>
</head>

<body>
<script type="text/javascript">
	//Counters for survey results
	var q1yes=0, q1no=0;
	var q2yes=0, q2no=0;
	
	//Retrieve and cycle through all cookies
	cookiesObj=getCookies();
	for(var name in cookiesObj){
		document.write(name+"="+cookiesObj[name]+"<br/>");//remove after testing
		var obj=JSON.parse(cookiesObj[name]);
		
		//Rules for result counters
		for(var name in obj){
			if(name=="question1"){
				if(obj[name]=="yes")q1yes++;
				if(obj[name]=="no")q1no++;
			}
			if(name=="question2"){
				if(obj[name]=="yes")q2yes++;
				if(obj[name]=="no")q2no++;
			}
			else{};
			//document.write(name+"="+obj[name]+"<br/>");//remove after testing
		}
	}
	//Display the results
	document.write("<p>Question 1 Yes = "+q1yes+"</p>");
	document.write("<p>Question 1 No = "+q1no+"</p>");
	document.write("<p>Question 2 Yes = "+q2yes+"</p>");
	document.write("<p>Question 2 No = "+q2no+"</p>");

</script>

<p><a href="index.html">Take survey again</a></p>


</body>
</html>
